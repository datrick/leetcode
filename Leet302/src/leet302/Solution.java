package leet302;

import java.util.Deque;
import java.util.LinkedList;

public class Solution {

	private boolean isUnvisitedEdge(char[][] image, int x, int y) {
		if (x < 0 || x >= image.length || y < 0 || y >= image[0].length || image[x][y] != '1')
			return false;
		for (int i = -1; i <= 1; i ++) 
			for (int j = -1; j <= 1; j ++) {
				int a = x + i, b = y + j;
				if (a < 0 || a >= image.length || b < 0 || b >= image[0].length || image[a][b] == '0')
					return true;
			}
		return false;
	}
	public int minArea(char[][] image, int x, int y) {
		Deque<Integer> dq = new LinkedList<>();
		int[] child = {0, 1, 0, -1, 1, 0, -1, 0};
		int xl = image.length, xh = -1, yl = image[0].length, yh = -1;
		int x0 = x;
		for (; x >= 0; x --) {
			if (image[x][y] == '1') {
				x0 = x;
				xl = Math.min(xl, x);
				xh = Math.max(xh, x);
				yl = Math.min(yl, y);
				yh = Math.max(yh, y);
			}
		}
		System.out.printf("x: %d, y: %d %n", x, y);
		System.out.printf("xl: %d, xh: %d, yl: %d, yh: %d%n", xl, xh, yl, yh);
		x = x0;
		dq.offer(x);
		dq.offer(y);
		while (! dq.isEmpty()) {
			int i = dq.poll();
			int j = dq.poll();
			System.out.printf("(%d, %d), ", i, j);
			for (int k = 0; k < 8; k += 2) {
				int a = i + child[k], b = j + child[k + 1];
				if (this.isUnvisitedEdge(image, a, b)) {
					image[a][b] = '2';
					dq.offer(a);
					dq.offer(b);
					xl = Math.min(xl, a);
					xh = Math.max(xh, a);
					yl = Math.min(yl, b);
					yh = Math.max(yh, b);
				}
			}
		}
		return (yh - yl + 1) * (xh - xl + 1);
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
//		String[] images = { "000000000000000000000000111111110011000000011000000000000000000000","000000000000000000000001111111111111000000011110000000000000000000","000000000000000000000011111111111111100001111110000000000000000000","000000000000000000000011101111110011111011110100000000000000000000","000000000000000000001111101111111111111011111100000000000000000000","000000000000000000000011111111111111111011111110000000000000000000","000000000000000000000011101111111011011111111111000000000000000000","000000000000000000000011110111111111111111111111100010000000000000","000000000000000000001111011100011110111111111111111110000000000000","000000000000000110000111111111111110110111111111111111110000000000","000000000000001110111111111111111000110111001111111111110000000000","000000000000001111111111111111101100110111111011111110111000000000","000000000000000001111111111111100111111111111111111111111100000000","000000000000000011111111101111101111111111111111111111111100000000","000000000000000011111000001111111011111111111111111111110110001000","000000000000000000011100111111111011101110111111111111111110001111","000000000000000000011100111111111101111111101111111111111111111011","000000000000000000001111111011111111111111111111111111111111111111","000000000000000000001101111111111111111101111111111111111111111111","000000000000000001111001111111111111111101110111111111111111111111","000000000000000111011111111100111111111111011111111110111111111111","000000000010000011111111010000011110111111001111111111111111111111","000000000011000000111111110000111111111111111111111111111011111111","000000000111111001011111111111111111111111111111111011110001111111","111000001111111111111111111101111111111111111111101010011011011111","111110011111111111100111111001111111111101111111111111111111111111","111111111101111111111111111111111111111111111111111111111111100001","111110010111111101111011111111110111111111111011111110111111000000","111100111111111101111000111111110111111111110011111000111111100000","111111111111011110111000111111111111101111110011111000111111110000","001111011111111110011101111111011111001111111111111000111100000000","000111111111111110011111111111111110000111111111111000011100000000","000111011111011111111111101111111110000111111011011000001111111111","000010011101111111111111111111001110000111111111111000001111111111","000010001111111011111111100011110111110010110110111110000111111111","000000001111111111111011000001111111110011111111111110000110001100","000000011111011111011001100001111111110111110111110111000110000100","000000011111011011111011100000001111111111101111111111110000000111","000000001100010011111011100000001100100111111111111111111100001111","000000000000011111111111100000000100001111111111111111111100111111","000000000001101111111111100000000000111111111111111111111110111110","000000000000101111111111100011100000111111111101111111111111111110","000000000001111111111111001111100111111111111101110111111111111110","000000000000111111111111111111101111111111011100110111111111111100","000000000000111011111111100000000011111111011100001111111111111100","000000000001111111111011000000000011111111101111111111111011111100","000000000001111111111111100000000011101011111111110111111111011100","000000000000011111111110000000000001111111011111111111100111111110","000000000000011111111100000000000011111111111111111111100111111110","000000000000011101111100000000001111111111111111111111000011111111","000000000000011111001100000000101111111111111111111111111111111111","000000000000001111001100000000101111111111111111111111110011111000","000000000000000011111100000000111111111111110111111111111111100000","000000000000000011111111110000111100000111110011111111111001100000","000000000000000011111111110000111000001111111111011111111111000000","000000000000000011111111111111111100011111111111001111101111000000","000000000000111111111111111111111111111111011110001011111110000000","000000000100111110011101111111111111111111111000001011011111000000","000000010111101111111101111111011111111111111001111011111111110000","000000010111111111111101111101011101110111110000111111111111100000","000000111111111111111111111101111111111111010000111111111001000000","000011111111111111111111111111111011111110000000111111111111111100","000001111011111111111111111111111011111110000011111111111110111100","000011111111111111101111111111111111111110000010011111111111111100","000010001111111111100111111111111110011111000000001111110111111101","000011111110011111110111111111111111111111100000000001111111111111","000011101111111111111111111111111101111011111000000001111111111111","000111011111111111111111110011111111110000001000000001111111111111","000111111111001111101111110011111111111000011000000000001111111111","001111111111111111111111110111111111111100001000000000001110000010","001111111111111111011111110111111110111000000000000000000000000000","001111111111110111101111111111111111101100000000000000000000000000","001001101111111111100111111110111111111000000000000000000000000000","000001111111111110011111111111111111111111111000000000000000000000","000001100111111111111111111111011111111111100000000000000000000000","000000111111111111111111111111000111100001100000000000000000000000","000000000011111110111111101101100011100000000000000000000000000000","000000000011111110111011111101101111100000000000000000000000000000","000000000011111011111000011111100001110000000000000000000000000000","000000000011111110111111111111111000111000000000000000000000000000","000000000011011111100111101111111001111000000000000000000000000000","000000000001011110001111100111110011111000000000000000000000000000","000000000000111111111111111111111111110000000000000000000000000000","000000000011111111111111111111111111111110000000000000000000000000","000000000000111111111111010001111111111111100000000000000000000000","000000000000111111011111110001111111111111100000000000000000000000" };	// 
		String[] images = { "01111", "01000" };
		int row = images.length;
		char[][] image = new char[row][];
		for (int i = 0; i < images.length; i ++)
			image[i] = images[i].toCharArray();
		System.out.println(new SolutionII().minArea(image, 0, 1));
	}

}
